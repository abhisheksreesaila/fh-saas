# ğŸ“§ Email Sending


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->

## ğŸ¯ Overview

<table>
<colgroup>
<col style="width: 33%" />
<col style="width: 36%" />
<col style="width: 30%" />
</colgroup>
<thead>
<tr>
<th>Category</th>
<th>Functions</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td>âš™ï¸ Config</td>
<td><a
href="https://abhisheksreesaila.github.io/fh-saas/utils_email.html#get_smtp_config"><code>get_smtp_config</code></a></td>
<td>Load SMTP settings from env</td>
</tr>
<tr>
<td>ğŸ“ Templates</td>
<td><a
href="https://abhisheksreesaila.github.io/fh-saas/utils_email.html#get_template_path"><code>get_template_path</code></a>,
<a
href="https://abhisheksreesaila.github.io/fh-saas/utils_email.html#load_template"><code>load_template</code></a></td>
<td>Manage markdown templates</td>
</tr>
<tr>
<td>âœ‰ï¸ Sending</td>
<td><a
href="https://abhisheksreesaila.github.io/fh-saas/utils_email.html#send_email"><code>send_email</code></a>,
<a
href="https://abhisheksreesaila.github.io/fh-saas/utils_email.html#send_batch_emails"><code>send_batch_emails</code></a></td>
<td>Core send functions</td>
</tr>
<tr>
<td>ğŸ Convenience</td>
<td><a
href="https://abhisheksreesaila.github.io/fh-saas/utils_email.html#send_welcome_email"><code>send_welcome_email</code></a>,
<a
href="https://abhisheksreesaila.github.io/fh-saas/utils_email.html#send_invitation_email"><code>send_invitation_email</code></a>,
<a
href="https://abhisheksreesaila.github.io/fh-saas/utils_email.html#send_password_reset_email"><code>send_password_reset_email</code></a></td>
<td>Pre-built templates</td>
</tr>
</tbody>
</table>

------------------------------------------------------------------------

## ğŸ—ï¸ Architecture

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                    Email Sending Flow                           â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚  1. Load SMTP config from environment variables                 â”‚
    â”‚  2. Load markdown template from templates/ directory            â”‚
    â”‚  3. Substitute template variables (user_name, etc.)             â”‚
    â”‚  4. Convert markdown to HTML via markdown_merge                 â”‚
    â”‚  5. Send via SMTP (Azure, SendGrid, AWS SES, etc.)             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

------------------------------------------------------------------------

## ğŸ“‹ Environment Variables

<table>
<thead>
<tr>
<th>Variable</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>SMTP_HOST</code></td>
<td>âœ…</td>
<td>-</td>
<td>SMTP server hostname</td>
</tr>
<tr>
<td><code>SMTP_PORT</code></td>
<td>âŒ</td>
<td>587</td>
<td>SMTP server port</td>
</tr>
<tr>
<td><code>SMTP_USER</code></td>
<td>âœ…</td>
<td>-</td>
<td>Auth username</td>
</tr>
<tr>
<td><code>SMTP_PASSWORD</code></td>
<td>âœ…</td>
<td>-</td>
<td>Auth password</td>
</tr>
<tr>
<td><code>SMTP_MAIL_FROM</code></td>
<td>âœ…</td>
<td>-</td>
<td>Sender email</td>
</tr>
<tr>
<td><code>SMTP_STARTTLS</code></td>
<td>âŒ</td>
<td>True</td>
<td>Use STARTTLS</td>
</tr>
<tr>
<td><code>SMTP_SSL</code></td>
<td>âŒ</td>
<td>False</td>
<td>Use SSL (disables TLS)</td>
</tr>
</tbody>
</table>

## âš™ï¸ SMTP Configuration

<table>
<colgroup>
<col style="width: 52%" />
<col style="width: 47%" />
</colgroup>
<thead>
<tr>
<th>Function</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><a
href="https://abhisheksreesaila.github.io/fh-saas/utils_email.html#get_smtp_config"><code>get_smtp_config</code></a></td>
<td>Load SMTP config from environment vars</td>
</tr>
</tbody>
</table>

------------------------------------------------------------------------

<a
href="https://github.com/abhisheksreesaila/fh-saas/blob/main/fh_saas/utils_email.py#L20"
target="_blank" style="float:right; font-size:smaller">source</a>

### get_smtp_config

``` python

def get_smtp_config(
    
)->Dict[str, Any]:

```

*Load SMTP configuration from environment variables.*

## ğŸ“ Template Management

**Built-in Templates:**  
We ship 3 production-ready markdown templates: - `welcome.md` - New user
onboarding - `invitation.md` - Invite users to tenant  
- `password_reset.md` - Password recovery

**Custom Templates:**  
You can provide your own templates by passing `custom_template_path` to
any email function.

<table>
<colgroup>
<col style="width: 52%" />
<col style="width: 47%" />
</colgroup>
<thead>
<tr>
<th>Function</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><a
href="https://abhisheksreesaila.github.io/fh-saas/utils_email.html#get_template_path"><code>get_template_path</code></a></td>
<td>Resolve path to template file (built-in or custom)</td>
</tr>
<tr>
<td><a
href="https://abhisheksreesaila.github.io/fh-saas/utils_email.html#load_template"><code>load_template</code></a></td>
<td>Read template content as string</td>
</tr>
</tbody>
</table>

------------------------------------------------------------------------

<a
href="https://github.com/abhisheksreesaila/fh-saas/blob/main/fh_saas/utils_email.py#L82"
target="_blank" style="float:right; font-size:smaller">source</a>

### load_template

``` python

def load_template(
    template_name:str, # Template basename (e.g., 'welcome')
    custom_template_path:Optional[str | Path]=None, # Custom path overrides package templates
)->str:

```

*Load markdown email template as string.*

------------------------------------------------------------------------

<a
href="https://github.com/abhisheksreesaila/fh-saas/blob/main/fh_saas/utils_email.py#L58"
target="_blank" style="float:right; font-size:smaller">source</a>

### get_template_path

``` python

def get_template_path(
    template_name:str, # Template basename (e.g., 'welcome', 'invitation')
    custom_template_path:Optional[str | Path]=None, # Custom path overrides package templates
)->Path:

```

*Get absolute path to email template file.*

## âœ‰ï¸ Email Sending

<table>
<colgroup>
<col style="width: 52%" />
<col style="width: 47%" />
</colgroup>
<thead>
<tr>
<th>Function</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><a
href="https://abhisheksreesaila.github.io/fh-saas/utils_email.html#send_email"><code>send_email</code></a></td>
<td>Send single email with template</td>
</tr>
<tr>
<td><a
href="https://abhisheksreesaila.github.io/fh-saas/utils_email.html#send_batch_emails"><code>send_batch_emails</code></a></td>
<td>Send to multiple recipients</td>
</tr>
</tbody>
</table>

------------------------------------------------------------------------

<a
href="https://github.com/abhisheksreesaila/fh-saas/blob/main/fh_saas/utils_email.py#L91"
target="_blank" style="float:right; font-size:smaller">source</a>

### send_email

``` python

def send_email(
    to_email:str, # Recipient email address
    to_name:str, # Recipient display name
    subject:str, # Email subject line
    template_name:str, # Template name: 'welcome', 'invitation', 'password_reset'
    template_vars:Dict[str, str], # Variables to substitute in template
    test:bool=False, # If True, prints email instead of sending
    smtp_config:Optional[Dict[str, Any]]=None, # Custom SMTP config (defaults to env vars)
    custom_template_path:Optional[str | Path]=None, # Custom template path
)->Dict[str, Any]:

```

*Send single email using markdown template with variable substitution.*

## ğŸ“¦ Batch Sending

<table>
<colgroup>
<col style="width: 52%" />
<col style="width: 47%" />
</colgroup>
<thead>
<tr>
<th>Function</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><a
href="https://abhisheksreesaila.github.io/fh-saas/utils_email.html#send_batch_emails"><code>send_batch_emails</code></a></td>
<td>Send personalized emails to multiple recipients</td>
</tr>
</tbody>
</table>

------------------------------------------------------------------------

<a
href="https://github.com/abhisheksreesaila/fh-saas/blob/main/fh_saas/utils_email.py#L170"
target="_blank" style="float:right; font-size:smaller">source</a>

### send_batch_emails

``` python

def send_batch_emails(
    recipients:List[Dict[str, str]], # List of dicts with 'email' and 'name' keys
    subject:str, # Email subject line
    template_name:str, # Template name: 'welcome', 'invitation', 'password_reset'
    template_vars_list:List[Dict[str, str]], # List of variable dicts, one per recipient
    test:bool=False, # If True, prints emails instead of sending
    pause:float=0.2, # Seconds between emails (rate limiting)
    smtp_config:Optional[Dict[str, Any]]=None, # Custom SMTP config
    custom_template_path:Optional[str | Path]=None, # Custom template path
)->List[Dict[str, Any]]:

```

*Send personalized emails to multiple recipients.*

## ğŸ Convenience Functions

Pre-built functions for common email types. All support
`custom_template_path` for using your own templates.

<table>
<colgroup>
<col style="width: 34%" />
<col style="width: 34%" />
<col style="width: 31%" />
</colgroup>
<thead>
<tr>
<th>Function</th>
<th>Template</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><a
href="https://abhisheksreesaila.github.io/fh-saas/utils_email.html#send_welcome_email"><code>send_welcome_email</code></a></td>
<td><code>welcome.md</code></td>
<td>New user onboarding</td>
</tr>
<tr>
<td><a
href="https://abhisheksreesaila.github.io/fh-saas/utils_email.html#send_invitation_email"><code>send_invitation_email</code></a></td>
<td><code>invitation.md</code></td>
<td>Invite to tenant</td>
</tr>
<tr>
<td><a
href="https://abhisheksreesaila.github.io/fh-saas/utils_email.html#send_password_reset_email"><code>send_password_reset_email</code></a></td>
<td><code>password_reset.md</code></td>
<td>Password recovery</td>
</tr>
</tbody>
</table>

------------------------------------------------------------------------

<a
href="https://github.com/abhisheksreesaila/fh-saas/blob/main/fh_saas/utils_email.py#L254"
target="_blank" style="float:right; font-size:smaller">source</a>

### send_welcome_email

``` python

def send_welcome_email(
    to_email:str, # Recipient email address
    to_name:str, # Recipient display name
    user_name:str, # User's name for personalization
    tenant_name:str, # Tenant/organization name
    dashboard_url:str, # URL to user's dashboard
    test:bool=False, # If True, prints email instead of sending
    custom_template_path:Optional[str | Path]=None, # Custom welcome.md template path
)->Dict[str, Any]:

```

*Send welcome email to new user. Template vars: {user_name},
{tenant_name}, {dashboard_url}, {to_email}*

------------------------------------------------------------------------

<a
href="https://github.com/abhisheksreesaila/fh-saas/blob/main/fh_saas/utils_email.py#L280"
target="_blank" style="float:right; font-size:smaller">source</a>

### send_invitation_email

``` python

def send_invitation_email(
    to_email:str, # Recipient email address
    to_name:str, # Recipient display name
    inviter_name:str, # Name of person sending invitation
    tenant_name:str, # Tenant/organization name
    invitation_url:str, # URL to accept invitation
    test:bool=False, # If True, prints email instead of sending
    custom_template_path:Optional[str | Path]=None, # Custom invitation.md template path
)->Dict[str, Any]:

```

*Send invitation email. Template vars: {inviter_name}, {tenant_name},
{invitation_url}, {to_email}*

------------------------------------------------------------------------

<a
href="https://github.com/abhisheksreesaila/fh-saas/blob/main/fh_saas/utils_email.py#L306"
target="_blank" style="float:right; font-size:smaller">source</a>

### send_password_reset_email

``` python

def send_password_reset_email(
    to_email:str, # Recipient email address
    to_name:str, # Recipient display name
    user_name:str, # User's name for personalization
    reset_url:str, # Secure password reset URL
    test:bool=False, # If True, prints email instead of sending
    custom_template_path:Optional[str | Path]=None, # Custom password_reset.md template path
)->Dict[str, Any]:

```

*Send password reset email. Template vars: {user_name}, {reset_url},
{to_email}*

## ğŸ“ Template Customization

### Built-in Templates

The package ships with 3 production-ready templates in
`fh_saas/templates/`:

<table>
<colgroup>
<col style="width: 47%" />
<col style="width: 52%" />
</colgroup>
<thead>
<tr>
<th>Template</th>
<th>Variables</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>welcome.md</code></td>
<td><code>{user_name}</code>, <code>{tenant_name}</code>,
<code>{dashboard_url}</code>, <code>{to_email}</code></td>
</tr>
<tr>
<td><code>invitation.md</code></td>
<td><code>{inviter_name}</code>, <code>{tenant_name}</code>,
<code>{invitation_url}</code>, <code>{to_email}</code></td>
</tr>
<tr>
<td><code>password_reset.md</code></td>
<td><code>{user_name}</code>, <code>{reset_url}</code>,
<code>{to_email}</code></td>
</tr>
</tbody>
</table>

### Creating Custom Templates

1.  Copy a built-in template as a starting point
2.  Modify the markdown and keep variable names in `{brackets}`
3.  Pass `custom_template_path='/path/to/template.md'` to any function

Templates use **markdown_merge** format - standard markdown with
`{variable}` placeholders.
